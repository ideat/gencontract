<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "mindware.com.mappers.BranchOfficeMapper">

    <resultMap type="branchoffice" id="BranchOfficeResult">
        <id 	property="branchOfficeId" column="branch_office_id"/>
        <result property="branchName" column="branch_name"/>
        <result property="cityName" column="city_name"/>
        <result property="provinceName" column="province_name"/>
        <result property="signatories" column="signatories" javaType="com.google.gson.JsonElement"/>
    </resultMap>

    <select id="findAllBranchOffice" resultMap="BranchOfficeResult">
        select branch_office_id, branch_name, city_name,province_name
        from branch_office

    </select>

    <insert id="insertBranchOffice"  parameterType="branchoffice" keyProperty="branchOfficeId" >
        insert into branch_office (
        branch_office_id,
        branch_name,
        city_name,
        province_name,
        signatories)
        values (
        #{branchOfficeId},
        #{branchName},
        #{cityName},
        #{provinceName},
        <if test="signatories == null">null</if>
        <if test="signatories != null">(#{signatories})::json</if>
        )

    </insert>

    <update id="updateSignatoriesBranchOffice" parameterType="branchoffice">
        update branch_office
        set
        signatories = #{signatories}
        where branch_office_id = #{branchOfficeId}

    </update>



</mapper>